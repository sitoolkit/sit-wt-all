= デバッグ機能
:imagesdir: img/デバッグ機能


デバッグ機能は、テスト実行を一時停止したりテストスクリプトを1行ずつ実行する機能です。
テストスクリプトが想定通りに動かない場合の原因調査に役立ちます。

---



== 使用方法

デバッグ機能を使用するには、テスト実行時のMavenコマンドに「-P debug」オプションを追加します。

....
mvn verify -P debug
....

このオプションによりデバッグモードでテストが実行されます。
特定のテストケースのみをデバッグ実行する場合はMavenコマンドに「-Dit.test=XxxxIT#xxx」オプションを追加します。
例えば「GitHub.xlsx」というテストスクリプトの「ケース_001」を実行する場合のコマンドは以下のようになります。

....
mvn verify -P debug -Dit.test=GitHubIT#test001
....

デバッグモードで実行中は、以下のいずれかの条件でテスト実行が一時停止します。

* <<_ブレークポイント,ブレークポイント>>が設定されたテストステップ
* テストケース終了後
* コンソールウィンドウでEnterキーがタイプされた時
* テスト実行中に例外発生


一時停止中はコンソールウィンドウでコマンドを受け付けるようになります。コマンドは「キー入力 + Enterキー」で実行します。 使用できるコマンドとその機能は以下の通りです。

[%autowidth]
|===
|コマンド|機能

|s
|テスト実行を再開します。

|b
|テストステップを1つ戻します。

|c
|現在のテストステップを実行します。

|f
|次のテストステップを実行します。

|!
|! [0]と入力するとNo.[0]のテストステップを実行します。

|#
|# [0]と入力するとNo.[0]のテストステップから開始するように設定します。

|e
|テストスクリプトを作成します。

|l
|l [0] [1]と入力するとロケーター書式[0]、値[1]に該当する要素を検出します。

|p
|ストアされているパラメーターを表示します。

|i
|i [0] [1]と入力すると、名前[0]、値[1]のパラメーターをストアします。

|o
|現在実行中のテストスクリプトを開きます。

|q
|テスト実行を終了します。
|===


=== ブレークポイント

テストスクリプトの「ブレークポイント」列に値を入力すると、その行でテスト実行を一時停止します。
値は任意の文字で入力可能です。
ブレークポイントはデバッグモードで実行中の場合のみ有効です。

**例)** 以下のテストスクリプトではNo.2のテストステップ実行前に一時停止します。

[%autowidth]
|===
|No.|項目|操作|ブレークポイント

|1
|開始URL
|open
|

|2
|名前
|input
|y

|3
|性別
|choose
|
|===


=== テストスクリプトの変更の再読み込み

一時停止中にテストスクリプトの内容を変更して保存すると、変更後の内容でテストスクリプトが実行されます。
ただしケースの追加は反映されません。


=== ウィンドウの整列

デバッグモードでは、以下のようにウィンドウを整列すると操作しやすくなります。

image::デバッグ1.png[,500]

以下の操作でアクティブウィンドウを画面の指定方向に寄せることができます。

* Windiws
+
「Windowsキー」 + 「方向キー」

* Mac OS X (アプリ：Shiftitを使用)
+
「Control」 + 「alt」 + 「Command」 + 「方向キー」

